#!groovy

pipeline {

    parameters {
      string(name: "SLAVE_TARGET", defaultValue: "master", description: "slave machine that responsible to execute tasks")
	  string(name: "BUILD_DIR", defaultValue: "D:/Testing/jmeter", description: "")
      string(name: "DEPLOY_DIR", defaultValue: "D:/BUILD_Packages/QA/Batch", description: "")	  
  }
  
   agent { label "${SLAVE_TARGET}" }
   
   stages {	 
	   stage("publish Resullts with ant")
	   {
	   steps
	   {
		dir('C:/jmeter/extras') {
     					 def antHome = tool 'ant'
      			 bat "pushd c:\\jmeter\\extras && ${antHome}\\bin\\ant -f build.xml"
       			step([$class: 'ArtifactArchiver', artifacts: 'devtestreport.html', fingerprint: true])
           }   
	   }
	   } 
     
   }
	
}
